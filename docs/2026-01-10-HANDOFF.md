## Session Handoff - ComfyUI Asset Pipeline Setup

### What Was Accomplished

**1. Ollama Remote Access**
- Configured Ollama to listen on all interfaces (`0.0.0.0:11434`)
- Edited `/etc/systemd/system/ollama.service` to add `Environment="OLLAMA_HOST=0.0.0.0"`
- Accessible at `http://sonofkong:11434`

**2. ComfyUI Remote Access**
- Already configured to listen on `0.0.0.0:8188`
- Service file: `/etc/systemd/system/comfyui.service`
- Accessible at `http://sonofkong:8188`

**3. Models Installed**

| Location | Models |
|----------|--------|
| `/home/tony/ComfyUI/models/checkpoints/` | `sd_xl_base_1.0.safetensors`, `model.ckpt` (TripoSR), `dreamshaper_8.safetensors` |
| `/home/tony/ComfyUI/models/unet/` | `flux1-dev.safetensors`, `flux1-schnell.safetensors` |
| `/home/tony/ComfyUI/models/text_encoders/` | `t5xxl_fp16.safetensors` |
| `/home/tony/ComfyUI/models/clip/` | `clip_l.safetensors` |
| `/home/tony/ComfyUI/models/vae/` | `ae.safetensors`, `sdxl_vae.safetensors` |
| `/home/tony/ComfyUI/models/loras/` | `sdxl_lightning_4step_lora.safetensors` |
| `/home/tony/ComfyUI/models/upscale_models/` | `RealESRGAN_x4plus.pth`, `4x-UltraSharp.pth` |
| `/home/tony/ComfyUI/models/animatediff_models/` | `mm_sdxl_v10_beta.ckpt`, `v3_sd15_mm.ckpt` |

**4. Custom Nodes Installed**
- ComfyUI-Manager
- ComfyUI-Impact-Pack
- ComfyUI-Custom-Scripts
- rgthree-comfy
- ComfyUI_IPAdapter_plus
- comfyui_controlnet_aux
- ComfyUI_UltimateSDUpscale
- ComfyUI-AnimateDiff-Evolved
- ComfyUI-VideoHelperSuite
- ComfyUI-Flowty-TripoSR
- ComfyUI-GGUF

**5. Python Environment**
- Created venv at `~/dev/lmspoonfeeder/venv/`
- Logged into HuggingFace for model downloads
- ComfyUI uses `/home/tony/ComfyUI/venv/bin/python`

---

### Pipeline Status

| Pipeline | Status | Workflow File |
|----------|--------|---------------|
| **SDXL Lightning** | ✅ Ready | `sdxl_lightning.json` |
| **FLUX Dev** | ✅ Ready | `flux_dev.json` |
| **Upscale 4x** | ✅ Ready | `upscale_4x.json` |
| **TripoSR 2D→3D** | ✅ Ready | `triposr_2d_to_3d.json` |
| **AnimateDiff Video** | ⚠️ Needs Testing | `animatediff_video.json` (just fixed) |

---

### Workflows Location
`/home/tony/ComfyUI/user/default/workflows/`

---

### Utility Scripts Created

| Script | Purpose |
|--------|---------|
| `~/comfyui_status.sh` | Check all pipeline statuses |
| `~/convert_obj_to_stl.sh` | Convert latest OBJ to STL for 3D printing |

---

### Next Session TODO

1. **Test AnimateDiff workflow** - Just updated, needs verification
2. **Integrate with Spoon Feeder** - Connect backend to ComfyUI API
3. **Create STL export node** - Or post-processing script for TripoSR
4. **Test batch generation** - Multiple images with seed variations

---

### Key Commands

```bash
# Check pipeline status
~/comfyui_status.sh

# Restart ComfyUI
sudo systemctl restart comfyui

# View ComfyUI logs
sudo journalctl -u comfyui -n 50 --no-pager

# Convert OBJ to STL
~/convert_obj_to_stl.sh

# Activate project venv
source ~/dev/lmspoonfeeder/venv/bin/activate
```

---

### Server: sonofkong

| Service | URL |
|---------|-----|
| ComfyUI | http://sonofkong:8188 |
| Ollama | http://sonofkong:11434 |
| Spoon Feeder Backend | http://localhost:3001 |